<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏÑ∏Í≥Ñ ÏÉùÏÑ±Í∏∞ - ÌåêÌÉÄÏßÄ Ìà¥ÌÇ∑</title>
    <!-- Í∏∞Î≥∏ Ïä§ÌÉÄÏùºÏãúÌä∏ Î°úÎìú -->
    <link rel="stylesheet" href="../../assets/css/main.css">
    <style>
        .world-generator-container {
            background: linear-gradient(135deg, rgba(173, 111, 255, 0.1), rgba(255, 111, 215, 0.1));
            border-radius: var(--border-radius);
            padding: 30px;
            margin: 40px 0;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .world-generator-container::before {
            content: "üåü";
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            animation: bounce 2s infinite;
            animation-delay: 0.3s;
        }

        .world-generator-container::after {
            content: "üí´";
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 24px;
            animation: bounce 2s infinite;
            animation-delay: 0.6s;
        }
        
        /* Î°úÎî© Ïù∏ÎîîÏºÄÏù¥ÌÑ∞ Ïä§ÌÉÄÏùº */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            font-family: 'Jua', sans-serif;
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 6px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--primary-color);
            animation: spin 1s infinite linear;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .generator-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .generator-title {
            font-size: 2.5rem;
            color: var(--primary-color);
            font-family: 'Jua', sans-serif;
            margin-bottom: 10px;
        }

        .generator-description {
            color: var(--text-color);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .generator-controls {
            background-color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .option-group {
            margin-bottom: 20px;
        }

        .option-title {
            font-family: 'Jua', sans-serif;
            color: var(--primary-dark);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .options-flex {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .option-button {
            padding: 8px 16px;
            background-color: #f0f0f0;
            border: 2px solid transparent;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option-button:hover {
            background-color: #e5e5e5;
        }

        .option-button.selected {
            background-color: var(--primary-light);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* ÌïÑÌÑ∞ Ïä§ÌÉÄÏùº */
        .filter-container {
            margin-top: 10px;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
        }
        
        .world-filter {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background-color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .world-filter:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 5px rgba(173, 111, 255, 0.3);
            outline: none;
        }
        
        .world-filter[multiple] {
            height: 120px;
        }
        
        .filter-description {
            margin-top: 10px;
            padding: 10px;
            background-color: white;
            border-left: 3px solid var(--primary-light);
            border-radius: 4px;
            font-size: 0.9rem;
            color: #666;
            min-height: 40px;
        }
        
        .filter-note {
            margin-top: 5px;
            font-size: 0.8rem;
            color: #888;
        }
        
        /* Í≥†Í∏â ÏòµÏÖò ÌÜ†Í∏Ä */
        .advanced-options-toggle {
            text-align: center;
            margin: 20px 0;
        }
        
        .advanced-options-toggle button {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1rem;
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 20px;
            transition: all 0.3s;
        }
        
        .advanced-options-toggle button:hover {
            background-color: rgba(173, 111, 255, 0.1);
        }
        
        .advanced-options {
            border-top: 1px dashed #ddd;
            padding-top: 20px;
            margin-top: 10px;
        }

        .generate-button {
            display: block;
            width: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 15px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Jua', sans-serif;
            margin-top: 10px;
        }

        .generate-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(173, 111, 255, 0.4);
        }

        .world-result {
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-top: 30px;
            display: none;
        }

        .world-result.visible {
            display: block;
            animation: fadeIn 0.5s;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px dashed var(--primary-light);
            padding-bottom: 15px;
        }

        .world-name {
            font-size: 2rem;
            color: var(--primary-dark);
            font-family: 'Jua', sans-serif;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-button {
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
        }

        .save-button {
            background-color: #4CAF50;
            color: white;
        }

        .copy-button {
            background-color: #2196F3;
            color: white;
        }

        .world-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .detail-card {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
        }

        .detail-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .detail-content {
            line-height: 1.5;
        }

        .world-description {
            margin-top: 20px;
            line-height: 1.7;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }

        /* Î™®Î∞îÏùº Î∞òÏùëÌòï */
        @media (max-width: 768px) {
            .world-details {
                grid-template-columns: 1fr;
            }
        }

        /* Ïï†ÎãàÎ©îÏù¥ÏÖò */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <!-- ==================== ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î©îÎâ¥ ==================== -->
    <nav class="nav-container">
        <div class="nav-inner">
            <!-- Î°úÍ≥† Î∞è ÏÇ¨Ïù¥Ìä∏ Ï†úÎ™© -->
            <a href="/" class="nav-logo">
                <i class="fas fa-dice-d20"></i>
                ‚ú® ÌåêÌÉÄÏßÄ Ìà¥ÌÇ∑ ‚ú®
            </a>
            
            <!-- ÌñÑÎ≤ÑÍ±∞ Î©îÎâ¥ ÌÜ†Í∏Ä Î≤ÑÌäº (Î™®Î∞îÏùº Ï†ÑÏö©) -->
            <div class="menu-toggle" id="mobile-menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <!-- Î©îÎâ¥ ÎßÅÌÅ¨ Î™©Î°ù -->
            <ul class="nav-links" id="nav-menu">
                <li><a href="/MobJAKO-CHAGEN">Ìôà</a></li>
                <li><a href="/MobJAKO-CHAGEN/tools/mob-generator/">Î™®Î∏å ÏÉùÏÑ±Í∏∞</a></li>
                <li><a href="/MobJAKO-CHAGEN/tools/world-generator/" class="active">ÏÑ∏Í≥Ñ ÏÉùÏÑ±Í∏∞</a></li>
                <li><a href="/MobJAKO-CHAGEN/tools/dungeon-generator/">ÎçòÏ†Ñ ÏÉùÏÑ±Í∏∞</a></li>
                <li><a href="/MobJAKO-CHAGEN/about.html">ÏÜåÍ∞ú</a></li>
            </ul>
        </div>
    </nav>

    <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
    <div class="container">
        <h1>ÏÑ∏Í≥Ñ ÏÉùÏÑ±Í∏∞</h1>
        
        <div class="world-generator-container">
            <div class="generator-header">
                <h2 class="generator-title">ÎãπÏã†ÎßåÏùò ÌåêÌÉÄÏßÄ ÏÑ∏Í≥ÑÎ•º ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî!</h2>
                <p class="generator-description">
                    ÏõêÌïòÎäî ÏÑ∏Í≥ÑÏùò ÌäπÏÑ±ÏùÑ ÏÑ†ÌÉùÌïòÍ≥† 'ÏÑ∏Í≥Ñ ÏÉùÏÑ±' Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥, ÎèÖÌäπÌïòÍ≥† Îß§Î†•Ï†ÅÏù∏ ÌåêÌÉÄÏßÄ ÏÑ∏Í≥ÑÍ∞Ä ÏÉùÏÑ±Îê©ÎãàÎã§.
                    ÏÉùÏÑ±Îêú ÏÑ∏Í≥ÑÎäî Í≤åÏûÑ Î∞∞Í≤Ω, Ï∞ΩÏûë Í∏ÄÏì∞Í∏∞, Î°§ÌîåÎ†àÏûâ Îì± Îã§ÏñëÌïú Ïö©ÎèÑÎ°ú ÌôúÏö©Ìï† Ïàò ÏûàÏäµÎãàÎã§.
                </p>
            </div>
            
            <div class="generator-controls">
                <div class="option-group">
                    <h3 class="option-title">ÏÑ∏Í≥ÑÏùò Î∂ÑÏúÑÍ∏∞</h3>
                    <div class="filter-container">
                        <select id="atmosphereFilter" class="world-filter" data-type="atmosphere">
                            <option value="random">ÎûúÎç§ ÏÑ†ÌÉù</option>
                            <!-- ÏûêÎèôÏúºÎ°ú Ï±ÑÏõåÏßà ÏòµÏÖòÎì§ -->
                        </select>
                        <div class="filter-description" id="atmosphereDescription">
                            Î∂ÑÏúÑÍ∏∞Î•º ÏÑ†ÌÉùÌïòÎ©¥ ÏÑ§Î™ÖÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.
                        </div>
                    </div>
                </div>
                
                <div class="option-group">
                    <h3 class="option-title">ÏßÄÎ¶¨Ï†Å ÌäπÏÑ±</h3>
                    <div class="filter-container">
                        <select id="geographyFilter" class="world-filter" data-type="geography">
                            <option value="random">ÎûúÎç§ ÏÑ†ÌÉù</option>
                            <!-- ÏûêÎèôÏúºÎ°ú Ï±ÑÏõåÏßà ÏòµÏÖòÎì§ -->
                        </select>
                        <div class="filter-description" id="geographyDescription">
                            ÏßÄÎ¶¨Î•º ÏÑ†ÌÉùÌïòÎ©¥ ÏÑ§Î™ÖÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.
                        </div>
                    </div>
                </div>
                
                <div class="option-group">
                    <h3 class="option-title">Í∏∞Ïà† ÏàòÏ§Ä</h3>
                    <div class="filter-container">
                        <select id="technologyFilter" class="world-filter" data-type="technology">
                            <option value="random">ÎûúÎç§ ÏÑ†ÌÉù</option>
                            <!-- ÏûêÎèôÏúºÎ°ú Ï±ÑÏõåÏßà ÏòµÏÖòÎì§ -->
                        </select>
                        <div class="filter-description" id="technologyDescription">
                            Í∏∞Ïà† ÏàòÏ§ÄÏùÑ ÏÑ†ÌÉùÌïòÎ©¥ ÏÑ§Î™ÖÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.
                        </div>
                    </div>
                </div>
                
                <div class="option-group">
                    <h3 class="option-title">ÎßàÎ≤ï ÏàòÏ§Ä</h3>
                    <div class="filter-container">
                        <select id="magicFilter" class="world-filter" data-type="magic">
                            <option value="random">ÎûúÎç§ ÏÑ†ÌÉù</option>
                            <!-- ÏûêÎèôÏúºÎ°ú Ï±ÑÏõåÏßà ÏòµÏÖòÎì§ -->
                        </select>
                        <div class="filter-description" id="magicDescription">
                            ÎßàÎ≤ï ÏàòÏ§ÄÏùÑ ÏÑ†ÌÉùÌïòÎ©¥ ÏÑ§Î™ÖÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.
                        </div>
                    </div>
                </div>
                
                <div class="advanced-options-toggle">
                    <button id="advancedToggle">Í≥†Í∏â ÏòµÏÖò ‚ñº</button>
                </div>
                
                <div class="advanced-options" id="advancedOptions" style="display: none;">
                    <div class="option-group">
                        <h3 class="option-title">Ï¢ÖÏ°± ÏÑ†Ìò∏ÎèÑ</h3>
                        <div class="filter-container">
                            <select id="racesFilter" class="world-filter" data-type="races" multiple>
                                <!-- ÏûêÎèôÏúºÎ°ú Ï±ÑÏõåÏßà ÏòµÏÖòÎì§ -->
                            </select>
                            <div class="filter-note">
                                Ïó¨Îü¨ Ï¢ÖÏ°±ÏùÑ ÏÑ†ÌÉùÌïòÎ†§Î©¥ Ctrl ÌÇ§(MacÏóêÏÑúÎäî Cmd ÌÇ§)Î•º ÎàÑÎ•∏ ÏÉÅÌÉúÏóêÏÑú ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî.
                            </div>
                        </div>
                    </div>
                    
                    <div class="option-group">
                        <h3 class="option-title">ÏûêÏõê ÏÑ†Ìò∏ÎèÑ</h3>
                        <div class="filter-container">
                            <select id="resourcesFilter" class="world-filter" data-type="resources" multiple>
                                <!-- ÏûêÎèôÏúºÎ°ú Ï±ÑÏõåÏßà ÏòµÏÖòÎì§ -->
                            </select>
                            <div class="filter-note">
                                Ïó¨Îü¨ ÏûêÏõêÏùÑ ÏÑ†ÌÉùÌïòÎ†§Î©¥ Ctrl ÌÇ§(MacÏóêÏÑúÎäî Cmd ÌÇ§)Î•º ÎàÑÎ•∏ ÏÉÅÌÉúÏóêÏÑú ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî.
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="generate-button" id="generateWorld">
                    üåç ÏÑ∏Í≥Ñ ÏÉùÏÑ±ÌïòÍ∏∞
                </button>
            </div>
            
            <div class="world-result" id="worldResult">
                <div class="result-header">
                    <h3 class="world-name" id="worldName">ÏïÑÎ¶¨ÏïÑÎÇò: ÎßàÎ≤ïÏùò ÎïÖ</h3>
                    <div class="action-buttons">
                        <button class="action-button copy-button">
                            <span>Î≥µÏÇ¨</span>
                        </button>
                        <button class="action-button save-button">
                            <span>Ï†ÄÏû•</span>
                        </button>
                    </div>
                </div>
                
                <div class="world-details">
                    <div class="detail-card">
                        <div class="detail-title">
                            <span>Î∂ÑÏúÑÍ∏∞</span>
                        </div>
                        <div class="detail-content" id="atmosphereResult">Ïã†ÎπÑÎ°≠Í≥† Ï¥àÏûêÏó∞Ï†Å</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-title">
                            <span>ÏßÄÎ¶¨</span>
                        </div>
                        <div class="detail-content" id="geographyResult">Íµ∞ÎèÑ ÏÑ∏Í≥Ñ</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-title">
                            <span>Í∏∞Ïà† ÏàòÏ§Ä</span>
                        </div>
                        <div class="detail-content" id="technologyResult">Î•¥ÎÑ§ÏÉÅÏä§</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-title">
                            <span>ÎßàÎ≤ï ÏàòÏ§Ä</span>
                        </div>
                        <div class="detail-content" id="magicResult">ÏùºÎ∞òÏ†Å</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-title">
                            <span>Ï£ºÏöî Ï¢ÖÏ°±</span>
                        </div>
                        <div class="detail-content" id="racesResult">Ïù∏Í∞Ñ, ÏóòÌîÑ, ÎìúÏõåÌîÑ, ÏöîÏ†ï</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-title">
                            <span>ÏûêÏõê</span>
                        </div>
                        <div class="detail-content" id="resourcesResult">ÎßàÎÇò ÌÅ¨Î¶¨Ïä§ÌÉà, ÏõîÍ¥ë Í∏àÏÜç, ÌïòÎäòÎÇòÎ¨¥</div>
                    </div>
                </div>
                
                <div class="world-description" id="worldDescription">
                    ÏïÑÎ¶¨ÏïÑÎÇòÎäî ÏàòÎ∞± Í∞úÏùò ÏûëÏùÄ ÏÑ¨Îì§Î°ú Ïù¥Î£®Ïñ¥ÏßÑ Ïã†ÎπÑÎ°úÏö¥ Íµ∞ÎèÑ ÏÑ∏Í≥ÑÏûÖÎãàÎã§. 
                    Î•¥ÎÑ§ÏÉÅÏä§Ïóê ÎßûÎ®πÎäî Í∏∞Ïà†Î†•ÏùÑ ÏßÄÎÖîÏßÄÎßå, Ïù¥ ÏÑ∏Í≥ÑÏóêÏÑúÎäî Í≥ºÌïôÎßåÌÅº ÎßàÎ≤ïÎèÑ ÏùºÏÉÅÏóê ÎÖπÏïÑÏûàÏäµÎãàÎã§. 
                    Ïù∏Í∞Ñ, ÏóòÌîÑ, ÎìúÏõåÌîÑ, ÏöîÏ†ïÎì§Ïù¥ Í∞ÅÏûêÏùò ÏÑ¨ÏóêÏÑú Í∑∏Îì§ÎßåÏùò Î¨∏ÌôîÎ•º Î∞úÏ†ÑÏãúÏº∞ÏúºÎ©∞, 
                    ÎßàÎÇò ÌÅ¨Î¶¨Ïä§ÌÉàÍ≥º ÏõîÍ¥ë Í∏àÏÜç, ÌïòÎäòÎÇòÎ¨¥ÏôÄ Í∞ôÏùÄ ÌäπÎ≥ÑÌïú ÏûêÏõêÎì§ÏùÑ ÌôúÏö©Ìï¥ 
                    ÎèÖÌäπÌïú Î¨∏Î™ÖÏùÑ Ïù¥Î£®ÏóàÏäµÎãàÎã§. Í∞Å ÏÑ¨ÎßàÎã§ Í≥†Ïú†Ìïú ÎßàÎ≤ï ÌùêÎ¶ÑÏù¥ ÏûàÏñ¥, 
                    ÏÑ¨ÎßàÎã§ Îã§Î•∏ Ï¢ÖÎ•òÏùò ÎßàÎ≤ïÏù¥ Í∞ïÌôîÎêòÎäî ÌäπÏÑ±Ïù¥ ÏûàÏäµÎãàÎã§.
                </div>
            </div>
        </div>

        <!-- Footer
        <footer class="footer">
            <p>¬© 2025 ÌåêÌÉÄÏßÄ Ìà¥ÌÇ∑. Î™®Îì† Í∂åÎ¶¨ Î≥¥Ïú†.</p>
            <p style="margin-top: 10px;">
                <a href="/privacy.html">Í∞úÏù∏Ï†ïÎ≥¥ Ï≤òÎ¶¨Î∞©Ïπ®</a> | 
                <a href="/terms.html">Ïù¥Ïö©ÏïΩÍ¥Ä</a> | 
                <a href="/contact.html">Î¨∏ÏùòÌïòÍ∏∞</a>
            </p>
            <p style="margin-top: 15px;">
                Made by ÌôçÏÇºÏ†ïÏóêÎ∏åÎ¶¨ÌÉÄÏûÑ üíú
            </p>
        </footer> -->
    </div>

    <!-- Í≥µÌÜµ ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ Î°úÎìú -->
    <script src="../../assets/js/common.js"></script>
    
    <!-- ÏÑ∏Í≥Ñ ÏÉùÏÑ±Í∏∞ Ï†ÑÏö© Ïä§ÌÅ¨Î¶ΩÌä∏ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Î°úÎî© ÏÉÅÌÉú ÌëúÏãú Ìï®Ïàò
            function showLoading(message) {
                const loadingEl = document.createElement('div');
                loadingEl.className = 'loading-overlay';
                loadingEl.innerHTML = `
                    <div class="loading-spinner"></div>
                    <p>${message}</p>
                `;
                document.body.appendChild(loadingEl);
                return loadingEl;
            }
            
            function hideLoading(loadingEl) {
                if (loadingEl) {
                    document.body.removeChild(loadingEl);
                }
            }
            
            // ÏÑ†ÌÉùÎêú ÏòµÏÖòÎì§ÏùÑ Ï†ÄÏû•Ìï† Í∞ùÏ≤¥
            const selectedOptions = {
                atmosphere: "random",
                geography: "random",
                technology: "random",
                magic: "random",
                races: [],
                resources: []
            };
            
            // Í≥†Í∏â ÏòµÏÖò ÌÜ†Í∏Ä
            const advancedToggle = document.getElementById('advancedToggle');
            const advancedOptions = document.getElementById('advancedOptions');
            
            advancedToggle.addEventListener('click', function() {
                if (advancedOptions.style.display === 'none') {
                    advancedOptions.style.display = 'block';
                    advancedToggle.textContent = 'Í≥†Í∏â ÏòµÏÖò ‚ñ≤';
                } else {
                    advancedOptions.style.display = 'none';
                    advancedToggle.textContent = 'Í≥†Í∏â ÏòµÏÖò ‚ñº';
                }
            });
            
            // ÌïÑÌÑ∞ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Î∞è ÏÑ§Ï†ï
            async function initializeFilters() {
                const loadingIndicator = showLoading('ÎßàÎ≤ïÏùò ÌïÑÌÑ∞Î•º Ï§ÄÎπÑÌïòÎäî Ï§ë...');
                
                try {
                    // Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
                    const worldData = await fetchWorldData();
                    
                    // Í∞Å ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî
                    initializeFilter('atmosphere', worldData.atmospheres, atmosphereCallback);
                    initializeFilter('geography', worldData.geographies, geographyCallback);
                    initializeFilter('technology', worldData.technologies, technologyCallback);
                    initializeFilter('magic', worldData.magics, magicCallback);
                    
                    // Ï¢ÖÏ°± Î©ÄÌã∞ ÏÖÄÎ†âÌä∏ Ï¥àÍ∏∞Ìôî
                    initializeMultiSelect('races', worldData.races);
                    
                    // ÏûêÏõê Î©ÄÌã∞ ÏÖÄÎ†âÌä∏ Ï¥àÍ∏∞Ìôî
                    initializeMultiSelect('resources', worldData.resources);
                    
                } catch (error) {
                    console.error('ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                } finally {
                    hideLoading(loadingIndicator);
                }
            }
            
            // ÏùºÎ∞ò ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî Ìï®Ïàò
            function initializeFilter(type, data, callback) {
                const filter = document.getElementById(`${type}Filter`);
                const description = document.getElementById(`${type}Description`);
                
                // Í∏∞Î≥∏ ÏòµÏÖò (ÎûúÎç§) Ïú†ÏßÄ
                
                // Í∞Å ÌïÑÌÑ∞ ÏòµÏÖò Ï∂îÍ∞Ä (random ÌÇ§Îäî Í±¥ÎÑàÎúÄ)
                Object.keys(data).forEach(key => {
                    if (key !== 'random') {
                        const option = document.createElement('option');
                        option.value = key;
                        option.textContent = data[key].name || data[key];
                        filter.appendChild(option);
                    }
                });
                
                // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
                filter.addEventListener('change', function() {
                    const value = this.value;
                    selectedOptions[type] = value;
                    
                    // ÏΩúÎ∞± Ìï®Ïàò Ïã§Ìñâ (ÏÑ§Î™Ö ÏóÖÎç∞Ïù¥Ìä∏)
                    if (callback) {
                        callback(value, data, description);
                    }
                });
            }
            
            // Î©ÄÌã∞ ÏÖÄÎ†âÌä∏ Ï¥àÍ∏∞Ìôî Ìï®Ïàò
            function initializeMultiSelect(type, items) {
                const filter = document.getElementById(`${type}Filter`);
                
                // Í∞Å Ìï≠Î™© Ï∂îÍ∞Ä
                items.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.name;
                    option.textContent = item.name;
                    filter.appendChild(option);
                });
                
                // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
                filter.addEventListener('change', function() {
                    const selectedValues = Array.from(this.selectedOptions).map(option => option.value);
                    selectedOptions[type] = selectedValues;
                });
            }
            
            // ÏΩúÎ∞± Ìï®ÏàòÎì§ - ÌïÑÌÑ∞ ÏÑ§Î™Ö ÏóÖÎç∞Ïù¥Ìä∏
            function atmosphereCallback(value, data, descriptionElement) {
                if (value === 'random') {
                    descriptionElement.textContent = 'Î∂ÑÏúÑÍ∏∞Î•º ÎûúÎç§ÏúºÎ°ú ÏÑ†ÌÉùÌï©ÎãàÎã§.';
                } else {
                    descriptionElement.textContent = data[value].description || 'ÏÑ†ÌÉùÌïú Î∂ÑÏúÑÍ∏∞Ïóê ÎåÄÌïú ÏÑ§Î™ÖÏù¥ ÏóÜÏäµÎãàÎã§.';
                }
            }
            
            function geographyCallback(value, data, descriptionElement) {
                if (value === 'random') {
                    descriptionElement.textContent = 'ÏßÄÎ¶¨Ï†Å ÌäπÏÑ±ÏùÑ ÎûúÎç§ÏúºÎ°ú ÏÑ†ÌÉùÌï©ÎãàÎã§.';
                } else {
                    descriptionElement.textContent = data[value].description || 'ÏÑ†ÌÉùÌïú ÏßÄÎ¶¨Ïóê ÎåÄÌïú ÏÑ§Î™ÖÏù¥ ÏóÜÏäµÎãàÎã§.';
                }
            }
            
            function technologyCallback(value, data, descriptionElement) {
                if (value === 'random') {
                    descriptionElement.textContent = 'Í∏∞Ïà† ÏàòÏ§ÄÏùÑ ÎûúÎç§ÏúºÎ°ú ÏÑ†ÌÉùÌï©ÎãàÎã§.';
                } else {
                    descriptionElement.textContent = data[value].description || 'ÏÑ†ÌÉùÌïú Í∏∞Ïà† ÏàòÏ§ÄÏóê ÎåÄÌïú ÏÑ§Î™ÖÏù¥ ÏóÜÏäµÎãàÎã§.';
                }
            }
            
            function magicCallback(value, data, descriptionElement) {
                if (value === 'random') {
                    descriptionElement.textContent = 'ÎßàÎ≤ï ÏàòÏ§ÄÏùÑ ÎûúÎç§ÏúºÎ°ú ÏÑ†ÌÉùÌï©ÎãàÎã§.';
                } else {
                    descriptionElement.textContent = data[value].description || 'ÏÑ†ÌÉùÌïú ÎßàÎ≤ï ÏàòÏ§ÄÏóê ÎåÄÌïú ÏÑ§Î™ÖÏù¥ ÏóÜÏäµÎãàÎã§.';
                }
            }
            
            // ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî Ïã§Ìñâ
            initializeFilters();
            
            // ÏÑ∏Í≥Ñ ÏÉùÏÑ± Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
            const generateButton = document.getElementById('generateWorld');
            generateButton.addEventListener('click', function() {
                generateWorld(selectedOptions);
            });
            
            // ÏÑ∏Í≥Ñ ÏÉùÏÑ± Ìï®Ïàò
            async function generateWorld(options) {
                const loadingIndicator = showLoading('ÎßàÎ≤ïÏùò ÏÑ∏Í≥ÑÎ•º ÏÉùÏÑ±ÌïòÎäî Ï§ë...');
                try {
                    // Î°úÎî© ÏÉÅÌÉú ÌëúÏãú
                    generateButton.textContent = 'ÏÉùÏÑ± Ï§ë...';
                    generateButton.disabled = true;
                    
                    // Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨ÏôÄ ÏÑ∏Í≥Ñ ÏÉùÏÑ±
                    const worldData = await fetchWorldData();
                    
                    // ÏÑ∏Í≥Ñ Ïù¥Î¶Ñ ÏÉùÏÑ±
                    const prefix = getRandomElement(worldData.names.prefixes);
                    const suffix = getRandomElement(worldData.names.suffixes);
                    const worldName = prefix + suffix;
                    
                    // ÏÑ†ÌÉùÎêú ÏòµÏÖòÏóê ÎßûÎäî ÏöîÏÜå ÏÑ†ÌÉù - Îçî ÏßÅÍ¥ÄÏ†ÅÏù∏ Î∞©ÏãùÏúºÎ°ú Î≥ÄÍ≤Ω
                    let atmosphere, geography, technology, magic;
                    let selectedRaces = [], selectedResources = [];
                    
                    // Î∂ÑÏúÑÍ∏∞ Í≤∞Ï†ï
                    if (options.atmosphere === 'random') {
                        // ÎûúÎç§ Î∂ÑÏúÑÍ∏∞ ÏÑ†ÌÉù - random Î∞∞Ïó¥ÏóêÏÑú ÏÑ†ÌÉùÌïòÍ±∞ÎÇò Îã§Î•∏ ÌÇ§ÏóêÏÑú ÏÑ†ÌÉù
                        const randomChance = Math.random();
                        if (randomChance > 0.7 && worldData.atmospheres.random && worldData.atmospheres.random.length) {
                            const randomAtmosphere = getRandomElement(worldData.atmospheres.random);
                            atmosphere = randomAtmosphere.name;
                        } else {
                            const atmKeys = Object.keys(worldData.atmospheres).filter(key => key !== 'random');
                            const randomAtmKey = getRandomElement(atmKeys);
                            atmosphere = worldData.atmospheres[randomAtmKey].name;
                        }
                    } else {
                        atmosphere = worldData.atmospheres[options.atmosphere].name;
                    }
                    
                    // ÏßÄÎ¶¨ Í≤∞Ï†ï
                    if (options.geography === 'random') {
                        const geoKeys = Object.keys(worldData.geographies).filter(key => key !== 'random');
                        const randomGeoKey = getRandomElement(geoKeys);
                        geography = worldData.geographies[randomGeoKey].name;
                    } else {
                        geography = worldData.geographies[options.geography].name;
                    }
                    
                    // Í∏∞Ïà† ÏàòÏ§Ä Í≤∞Ï†ï
                    if (options.technology === 'random') {
                        const techKeys = Object.keys(worldData.technologies).filter(key => key !== 'random');
                        const randomTechKey = getRandomElement(techKeys);
                        technology = worldData.technologies[randomTechKey].name;
                    } else {
                        technology = worldData.technologies[options.technology].name;
                    }
                    
                    // ÎßàÎ≤ï ÏàòÏ§Ä Í≤∞Ï†ï
                    if (options.magic === 'random') {
                        const magicKeys = Object.keys(worldData.magics).filter(key => key !== 'random');
                        const randomMagicKey = getRandomElement(magicKeys);
                        magic = worldData.magics[randomMagicKey].name;
                    } else {
                        magic = worldData.magics[options.magic].name;
                    }
                    
                    // Ï¢ÖÏ°± ÏÑ†ÌÉù - ÏÇ¨Ïö©ÏûêÍ∞Ä ÏÑ†ÌÉùÌñàÎã§Î©¥ Í∑∏Í≤ÉÏùÑ ÏÇ¨Ïö©, ÏïÑÎãàÎ©¥ ÎûúÎç§
                    if (options.races && options.races.length > 0) {
                        selectedRaces = options.races;
                    } else {
                        const raceCount = Math.floor(Math.random() * 3) + 2; // 2~4Í∞ú ÏÑ†ÌÉù
                        selectedRaces = getRandomElements(worldData.races, raceCount).map(race => race.name);
                    }
                    
                    // ÏûêÏõê ÏÑ†ÌÉù - ÏÇ¨Ïö©ÏûêÍ∞Ä ÏÑ†ÌÉùÌñàÎã§Î©¥ Í∑∏Í≤ÉÏùÑ ÏÇ¨Ïö©, ÏïÑÎãàÎ©¥ ÎûúÎç§
                    if (options.resources && options.resources.length > 0) {
                        selectedResources = options.resources;
                    } else {
                        const resourceCount = Math.floor(Math.random() * 3) + 2; // 2~4Í∞ú ÏÑ†ÌÉù
                        selectedResources = getRandomElements(worldData.resources, resourceCount).map(resource => resource.name);
                    }
                    
                    // ÏÑ∏Í≥Ñ ÏÑ§Î™Ö ÏÉùÏÑ±
                    const description = generateWorldDescription(
                        worldName, atmosphere, geography, technology, magic, 
                        selectedRaces, selectedResources, worldData.templates
                    );
                    
                    // Í≤∞Í≥º ÌëúÏãú
                    displayWorldResult(
                        worldName, atmosphere, geography, technology, magic, 
                        selectedRaces, selectedResources, description
                    );
                    
                } catch (error) {
                    console.error('ÏÑ∏Í≥Ñ ÏÉùÏÑ± Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                    alert('ÏÑ∏Í≥Ñ ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
                } finally {
                    // Î≤ÑÌäº ÏÉÅÌÉú Î≥µÏõê
                    generateButton.textContent = 'üåç ÏÑ∏Í≥Ñ ÏÉùÏÑ±ÌïòÍ∏∞';
                    generateButton.disabled = false;
                    hideLoading(loadingIndicator);
                }
            }
            
            // ÏÑ∏Í≥Ñ Îç∞Ïù¥ÌÑ∞ Î∂àÎü¨Ïò§Í∏∞ Ìï®Ïàò
            async function fetchWorldData() {
                try {
                    // Í∞Å JSON ÌååÏùº Î∂àÎü¨Ïò§Í∏∞
                    const namesResponse = await fetch('${basePath}data/world/world_names.json');
                    const atmospheresResponse = await fetch('${basePath}data/world/atmospheres.json');
                    const geographiesResponse = await fetch('${basePath}data/world/geographies.json');
                    const technologiesResponse = await fetch('${basePath}data/world/technologies.json');
                    const magicsResponse = await fetch('${basePath}data/world/magics.json');
                    const racesResponse = await fetch('${basePath}data/world/races.json');
                    const resourcesResponse = await fetch('${basePath}data/world/resources.json');
                    const templatesResponse = await fetch('${basePath}data/world/world_templates.json');
                    
                    // JSONÏúºÎ°ú Î≥ÄÌôò
                    const names = await namesResponse.json();
                    const atmospheres = await atmospheresResponse.json();
                    const geographies = await geographiesResponse.json();
                    const technologies = await technologiesResponse.json();
                    const magics = await magicsResponse.json();
                    const races = await racesResponse.json();
                    const resources = await resourcesResponse.json();
                    const templates = await templatesResponse.json();
                    
                    // Î™®Îì† Îç∞Ïù¥ÌÑ∞Î•º ÌïòÎÇòÏùò Í∞ùÏ≤¥Î°ú Í≤∞Ìï©
                    return {
                        names,
                        atmospheres,
                        geographies,
                        technologies,
                        magics,
                        races: races.races,
                        resources: resources.resources,
                        templates: templates.templates
                    };
                } catch (error) {
                    console.error('Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                    
                    // Ïò§Î•ò Î∞úÏÉù Ïãú ÎåÄÏ≤¥ Îç∞Ïù¥ÌÑ∞ Î∞òÌôò (Î°úÏª¨ Í∞úÎ∞úÏö©)
                    return {
                        names: {
                            prefixes: ['ÏïÑÎ¶¨', 'Ïóò', 'ÌÖå', 'ÌÅ¨Î°ú', 'Í∞ê', 'ÎìúÎùº', 'Ïã§', 'Î£®', 'ÎØ∏', 'Î∞ú'],
                            suffixes: ['ÏïÑÎÇò', 'Î¶¨ÏïÑ', 'Î°†', 'ÎãàÏä§', 'ÎèÑÎ•¥', 'Í∞ÄÎìú', 'ÌÉÄÎãàÏïÑ', 'Ìó§ÏûÑ', 'ÎûÄ', 'Î¶¨Ïò®']
                        },
                        atmospheres: {
                            bright: { name: 'Î∞ùÍ≥† Ìù¨ÎßùÏ†ÅÏù∏', description: 'Ìï≠ÏÉÅ Î∞ùÏùÄ ÎπõÏù¥ ÎπÑÏ∂îÍ≥† Ìù¨ÎßùÏù¥ ÎÑòÏπòÎäî' },
                            dark: { name: 'Ïñ¥Îë°Í≥† ÏùåÏö∏Ìïú', description: 'Í∑∏Î¶ºÏûêÍ∞Ä ÎìúÎ¶¨ÏõåÏßÑ ÏùåÏö∏Ìïú Î∂ÑÏúÑÍ∏∞Ïùò' },
                            mysterious: { name: 'Ïã†ÎπÑÎ°≠Í≥† Ï¥àÏûêÏó∞Ï†ÅÏù∏', description: 'ÎπÑÎ∞ÄÍ≥º ÏàòÏàòÍªòÎÅºÎ°ú Í∞ÄÎìùÌïú Ï¥àÏûêÏó∞Ï†ÅÏù∏' },
                            magical: { name: 'ÎßàÎ≤ïÏù¥ ÎÑòÏπòÎäî', description: 'ÎßàÎ≤ïÏùò Í∏∞Ïö¥Ïù¥ Í≥µÍ∏∞ Ï§ëÏóê ÌùêÎ•¥Îäî' },
                            steampunk: { name: 'Ï¶ùÍ∏∞ÏôÄ Í∏∞Í≥ÑÍ∞Ä Í≥µÏ°¥ÌïòÎäî', description: 'Ï¶ùÍ∏∞ Í∏∞Í¥ÄÍ≥º ÌÜ±ÎãàÎ∞îÌÄ¥Í∞Ä ÏûëÎèôÌïòÎäî' },
                            random: [
                                { name: 'ÌèâÌôîÎ°úÏö¥', description: 'ÌèâÌôîÏôÄ ÏïàÏ†ïÏù¥ ÍπÉÎì†' },
                                { name: 'ÌòºÎèàÏä§Îü¨Ïö¥', description: 'ÎÅäÏûÑÏóÜÏù¥ Î≥ÄÌôîÌïòÍ≥† ÏòàÏ∏°Ìï† Ïàò ÏóÜÎäî' },
                                { name: 'Ïö∞Ï£ºÏ†ÅÏù∏', description: 'Î≥ÑÎì§Í≥º Ïö∞Ï£ºÏùò Ïã†ÎπÑÎ°ú Í∞ÄÎìùÌïú' }
                            ]
                        },
                        geographies: {
                            island: { name: 'Í±∞ÎåÄÌïú ÏÑ¨', description: 'ÏÇ¨Î∞©Ïù¥ Î∞îÎã§Î°ú ÎëòÎü¨Ïã∏Ïù∏ Í±∞ÎåÄÌïú ÏÑ¨ÏúºÎ°ú Ïù¥Î£®Ïñ¥ÏßÑ' },
                            continent: { name: 'Í¥ëÌôúÌïú ÎåÄÎ•ô', description: 'ÎÅùÏóÜÏù¥ ÌéºÏ≥êÏßÑ Í¥ëÌôúÌïú ÎåÄÎ•ôÏúºÎ°ú Ïù¥Î£®Ïñ¥ÏßÑ' },
                            archipelago: { name: 'ÏàòÎßéÏùÄ ÏÑ¨ÏúºÎ°ú Ïù¥Î£®Ïñ¥ÏßÑ Íµ∞ÎèÑ', description: 'ÌÅ¨Í≥† ÏûëÏùÄ ÏàòÎ∞± Í∞úÏùò ÏÑ¨ÏúºÎ°ú Íµ¨ÏÑ±Îêú' },
                            floating: { name: 'ÌïòÎäòÏóê Îñ† ÏûàÎäî ÎïÖ', description: 'Íµ¨Î¶Ñ ÏúÑÏóê Îñ† ÏûàÎäî Ïã†ÎπÑÎ°úÏö¥ ÎïÖÏúºÎ°ú Íµ¨ÏÑ±Îêú' },
                            underground: { name: 'ÍπäÍ≥† ÎÑìÏùÄ ÏßÄÌïò ÏÑ∏Í≥Ñ', description: 'ÏßÄÌëúÎ©¥ ÏïÑÎûò ÍπäÏàôÏù¥ ÌéºÏ≥êÏßÑ Í±∞ÎåÄÌïú ÎèôÍµ¥ ÎÑ§Ìä∏ÏõåÌÅ¨Î°ú Ïù¥Î£®Ïñ¥ÏßÑ' }
                        },
                        technologies: {
                            primitive: { name: 'ÏõêÏãúÏ†ÅÏù∏', description: 'ÎèåÍ≥º ÎÇòÎ¨¥Î°ú ÎßåÎì† ÎèÑÍµ¨Î•º ÏÇ¨Ïö©ÌïòÎäî' },
                            medieval: { name: 'Ï§ëÏÑ∏ ÏàòÏ§ÄÏùò', description: 'Ï≤†Ï†ú Î¨¥Í∏∞ÏôÄ Í∞ëÏò∑ÏùÑ Îã§Î£®Îäî Í∏∞Ïà†ÏùÑ Í∞ÄÏßÑ' },
                            renaissance: { name: 'Î•¥ÎÑ§ÏÉÅÏä§ ÏãúÎåÄÏùò', description: 'ÏòàÏà†Í≥º Í≥ºÌïôÏù¥ Î∞úÎã¨ÌïòÍ∏∞ ÏãúÏûëÌïú' },
                            industrial: { name: 'ÏÇ∞ÏóÖÌòÅÎ™Ö ÏãúÍ∏∞Ïùò', description: 'Ï¶ùÍ∏∞ Í∏∞Í¥ÄÍ≥º Í≥µÏû•Ïù¥ Îì±Ïû•Ìïú' },
                            futuristic: { name: 'ÎØ∏ÎûòÏ†ÅÏù∏', description: 'Í≥†ÎèÑÎ°ú Î∞úÎã¨Îêú Í≥ºÌïô Í∏∞Ïà†ÏùÑ Í∞ÄÏßÑ' }
                        },
                        magics: {
                            none: { name: 'ÎßàÎ≤ïÏù¥ Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî', description: 'Ï¥àÏûêÏó∞Ï†ÅÏù∏ ÌûòÏù¥ ÏóÜÏù¥ Í≥ºÌïôÍ≥º ÎÖºÎ¶¨ÎßåÏù¥ ÏßÄÎ∞∞ÌïòÎäî' },
                            rare: { name: 'ÎßàÎ≤ïÏù¥ Ìù¨Í∑ÄÌïú', description: 'ÏÜåÏàòÏùò ÏÑ†ÌÉùÎ∞õÏùÄ ÏÇ¨ÎûåÎì§ÎßåÏù¥ ÎßàÎ≤ïÏùÑ Îã§Î£∞ Ïàò ÏûàÎäî' },
                            common: { name: 'ÎßàÎ≤ïÏù¥ ÏùºÏÉÅÏ†ÅÏù∏', description: 'ÎßéÏùÄ ÏÇ¨ÎûåÎì§Ïù¥ ÏùºÏÉÅ ÏÉùÌôúÏóêÏÑú ÎßàÎ≤ïÏùÑ ÏÇ¨Ïö©ÌïòÎäî' },
                            abundant: { name: 'ÎßàÎ≤ïÏù¥ ÌïÑÏàòÏ†ÅÏù∏', description: 'ÎßàÎ≤ï ÏóÜÏù¥Îäî ÏÇ¨ÌöåÍ∞Ä Í∏∞Îä•Ìï† Ïàò ÏóÜÏùÑ Ï†ïÎèÑÎ°ú ÎßàÎ≤ïÏù¥ ÍπäÍ≤å ÎøåÎ¶¨ÎÇ¥Î¶∞' },
                            technological: { name: 'ÎßàÎ≤ïÍ≥º Í∏∞Ïà†Ïù¥ ÏúµÌï©Îêú', description: 'Í≥ºÌïôÍ≥º ÎßàÎ≤ïÏù¥ ÌïòÎÇòÎ°ú Í≤∞Ìï©ÎêòÏñ¥ Î∞úÏ†ÑÌïú' }
                        },
                        races: [
                            { name: 'Ïù∏Í∞Ñ', description: 'Ï†ÅÏùëÎ†•Ïù¥ Îõ∞Ïñ¥ÎÇòÍ≥† Ï∞ΩÏùòÏ†ÅÏù∏ Ï¢ÖÏ°±' },
                            { name: 'ÏóòÌîÑ', description: 'ÏûêÏó∞Í≥º Ï°∞ÌôîÎ•º Ïù¥Î£®Î©∞ Ïò§Îûò ÏÇ¨Îäî Ï¢ÖÏ°±' },
                            { name: 'ÎìúÏõåÌîÑ', description: 'ÏÇ∞Í≥º ÏßÄÌïòÏóê Í±∞Ï£ºÌïòÎ©∞ Ïû•Ïù∏ Ï†ïÏã†Ïù¥ Í∞ïÌïú Ï¢ÖÏ°±' },
                            { name: 'Ïò§ÌÅ¨', description: 'Í∞ïÏù∏Ìïú Ï≤¥Î†•Í≥º Ï†ÑÏÇ¨Ïùò Í∏∞ÏßàÏùÑ Í∞ÄÏßÑ Ï¢ÖÏ°±' },
                            { name: 'ÏöîÏ†ï', description: 'ÏûëÍ≥† ÎÇ†Í∞úÎ•º Í∞ÄÏßÑ ÎßàÎ≤ïÏóê Îä•Ìïú Ï¢ÖÏ°±' },
                            { name: 'Í≥†Î∏îÎ¶∞', description: 'ÍæÄÍ∞Ä ÎßéÍ≥† Ïû•ÎÇúÏùÑ Ï¢ãÏïÑÌïòÎäî ÎÖπÏÉâ ÌîºÎ∂ÄÏùò Ï¢ÖÏ°±' },
                            { name: 'Ïñ∏Îç∞Îìú', description: 'Ï£ΩÏùåÏùÑ Ï¥àÏõîÌïú ÏòÅÌòºÏùÑ Í∞ÄÏßÑ Ï¢ÖÏ°±' }
                        ],
                        resources: [
                            { name: 'ÎßàÎÇò ÌÅ¨Î¶¨Ïä§ÌÉà', description: 'ÎßàÎ≤ï ÏóêÎÑàÏßÄÎ•º Ï†ÄÏû•ÌïòÍ≥† Î≥ÄÌôòÌï† Ïàò ÏûàÎäî Ìù¨Í∑ÄÌïú Í¥ëÎ¨º' },
                            { name: 'ÏõîÍ¥ë Í∏àÏÜç', description: 'Îã¨ÎπõÏùÑ Î∞õÏúºÎ©¥ ÎπõÎÇòÎ©∞ Í∞ïÌï¥ÏßÄÎäî ÌäπÏù¥Ìïú Í∏àÏÜç' },
                            { name: 'ÌïòÎäòÎÇòÎ¨¥', description: 'Íµ¨Î¶ÑÏ≤òÎüº Í∞ÄÎ≥çÏßÄÎßå Í∞ïÏ≤†Î≥¥Îã§ Îã®Îã®Ìïú Ìù¨Í∑ÄÌïú ÎÇòÎ¨¥' },
                            { name: 'Ïö©Ïùò ÎπÑÎäò', description: 'Í∑πÎèÑÎ°ú ÎÇ¥Ïó¥ÏÑ±Ïù¥ Í∞ïÌïòÍ≥† ÎπõÏùÑ Î∞òÏÇ¨ÌïòÎäî Ïû¨Î£å' },
                            { name: 'Ï†ïÎ†πÏÑù', description: 'ÏûêÏó∞Ïùò Ï†ïÎ†πÏù¥ ÍπÉÎì† Ïã†ÎπÑÎ°úÏö¥ Î≥¥ÏÑù' }
                        ],
                        templates: [
                            "{name}ÏùÄ(Îäî) {geography} ÏÑ∏Í≥ÑÏûÖÎãàÎã§. {technology} Í∏∞Ïà† ÏàòÏ§ÄÏùÑ Í∞ÄÏßÑ Ïù¥Í≥≥ÏùÄ {atmosphere} Î∂ÑÏúÑÍ∏∞Í∞Ä ÌäπÏßïÏù¥Î©∞, {magic} ÎßàÎ≤ïÏù¥ Ï°¥Ïû¨Ìï©ÎãàÎã§. {races}Ïù¥(Í∞Ä) Ï£ºÏöî Ï¢ÖÏ°±ÏúºÎ°ú ÏÇ¥Í≥† ÏûàÏúºÎ©∞, {resources}ÏôÄ(Í≥º) Í∞ôÏùÄ Í∑ÄÏ§ëÌïú ÏûêÏõêÏù¥ Î∞úÍ≤¨Îê©ÎãàÎã§. Í∞Å ÏßÄÏó≠ÎßàÎã§ ÎèÖÌäπÌïú Î¨∏ÌôîÏôÄ Ïó≠ÏÇ¨Í∞Ä ÏûàÏñ¥ Î™®ÌóòÍ∞ÄÎì§ÏóêÍ≤å Î¨¥ÌïúÌïú ÌÉêÌóòÏùò Í∏∞ÌöåÎ•º Ï†úÍ≥µÌï©ÎãàÎã§.",
                            
                            "{atmosphere} Î∂ÑÏúÑÍ∏∞Ïùò {name} ÏÑ∏Í≥ÑÎäî {geography} ÌäπÏÑ±ÏùÑ ÏßÄÎãàÍ≥† ÏûàÏäµÎãàÎã§. Ïù¥Í≥≥Ïùò Ï£ºÎØºÎì§ÏùÄ {technology} Í∏∞Ïà†ÏùÑ Î∞úÏ†ÑÏãúÏº∞ÏúºÎ©∞, {magic} ÎßàÎ≤ïÏùÑ Îã§Î£πÎãàÎã§. {races} Ï¢ÖÏ°±Îì§Ïù¥ Ïù¥ ÏÑ∏Í≥ÑÏùò Ï£ºÏù∏Ïù¥Î©∞, {resources} Í∞ôÏùÄ ÌäπÎ≥ÑÌïú ÏûêÏõêÎì§ÏùÑ ÌôúÏö©Ìï¥ Î¨∏Î™ÖÏùÑ Î∞úÏ†ÑÏãúÏº∞ÏäµÎãàÎã§. Ïù¥Í≥≥Ïùò Ïó≠ÏÇ¨Îäî ÍπäÍ≥† ÌíçÎ∂ÄÌïòÎ©∞, ÏïÑÏßÅ Î∞ùÌòÄÏßÄÏßÄ ÏïäÏùÄ ÎπÑÎ∞ÄÏù¥ ÎßéÏäµÎãàÎã§.",
                            
                            "{name}Ïùò ÏÑ∏Í≥ÑÎäî {geography}Î°ú Íµ¨ÏÑ±ÎêòÏñ¥ ÏûàÏúºÎ©∞, {atmosphere} Î∂ÑÏúÑÍ∏∞Í∞Ä Ìï≠ÏÉÅ Í∞êÎèåÍ≥† ÏûàÏäµÎãàÎã§. {races} Ï¢ÖÏ°±Îì§ÏùÄ {technology} Í∏∞Ïà†Í≥º {magic} ÎßàÎ≤ïÏùÑ Í≤∞Ìï©ÌïòÏó¨ ÎèÖÌäπÌïú Î¨∏ÌôîÎ•º Ïù¥Î£®ÏóàÏäµÎãàÎã§. Ïù¥ ÏÑ∏Í≥ÑÏóêÏÑúÎäî {resources}ÏôÄ(Í≥º) Í∞ôÏùÄ ÏûêÏõêÏù¥ Î¨∏Î™ÖÏùò Î∞úÏ†ÑÏóê Ï§ëÏöîÌïú Ïó≠Ìï†ÏùÑ Ìï©ÎãàÎã§. Ïó¨ÌñâÏûêÎì§ÏùÄ Ïù¥ ÏÑ∏Í≥ÑÏùò Í≤ΩÏù¥Î°úÏõÄÏóê ÏïïÎèÑÎêòÍ≥§ Ìï©ÎãàÎã§."
                        ]
                    };
                }
            }
            
            // Î∞∞Ïó¥ÏóêÏÑú ÎûúÎç§ ÏöîÏÜå ÌïòÎÇò ÏÑ†ÌÉù
            function getRandomElement(array) {
                return array[Math.floor(Math.random() * array.length)];
            }
            
            // Î∞∞Ïó¥ÏóêÏÑú Ïó¨Îü¨ Í∞úÏùò ÎûúÎç§ ÏöîÏÜå ÏÑ†ÌÉù
            function getRandomElements(array, count) {
                const shuffled = [...array].sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }
            
            // ÏÑ∏Í≥Ñ ÏÑ§Î™Ö ÏÉùÏÑ±
            function generateWorldDescription(name, atmosphere, geography, technology, magic, races, resources, templates) {
                const racesText = races.length > 1 
                    ? races.slice(0, -1).join(', ') + 'ÏôÄ(Í≥º) ' + races[races.length - 1]
                    : races[0];
                
                const resourcesText = resources.length > 1 
                    ? resources.slice(0, -1).join(', ') + 'ÏôÄ(Í≥º) ' + resources[resources.length - 1]
                    : resources[0];
                
                // ÎûúÎç§ ÌÖúÌîåÎ¶ø ÏÑ†ÌÉù
                const template = getRandomElement(templates);
                
                // ÌÖúÌîåÎ¶øÏóê Í∞í Ï±ÑÏö∞Í∏∞
                return template
                    .replace('{name}', name)
                    .replace('{atmosphere}', atmosphere)
                    .replace('{geography}', geography)
                    .replace('{technology}', technology)
                    .replace('{magic}', magic)
                    .replace('{races}', racesText)
                    .replace('{resources}', resourcesText);
            }
            
            // Í≤∞Í≥º ÌëúÏãú Ìï®Ïàò
            function displayWorldResult(name, atmosphere, geography, technology, magic, races, resources, description) {
                document.getElementById('worldName').textContent = name;
                document.getElementById('atmosphereResult').textContent = atmosphere;
                document.getElementById('geographyResult').textContent = geography;
                document.getElementById('technologyResult').textContent = technology;
                document.getElementById('magicResult').textContent = magic;
                document.getElementById('racesResult').textContent = races.join(', ');
                document.getElementById('resourcesResult').textContent = resources.join(', ');
                document.getElementById('worldDescription').textContent = description;
                
                // Í≤∞Í≥º ÏòÅÏó≠ ÌëúÏãú
                const resultElement = document.getElementById('worldResult');
                resultElement.classList.add('visible');
                resultElement.scrollIntoView({ behavior: 'smooth' });
                
                // Ïù¥Ï†Ñ Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï†úÍ±∞ (Ï§ëÎ≥µ Î∞©ÏßÄ)
                const copyButton = document.querySelector('.copy-button');
                const saveButton = document.querySelector('.save-button');
                
                copyButton.replaceWith(copyButton.cloneNode(true));
                saveButton.replaceWith(saveButton.cloneNode(true));
                
                // ÏÉà Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Îì±Î°ù
                document.querySelector('.copy-button').addEventListener('click', function() {
                    const textToCopy = `${name}\n\n` +
                        `Î∂ÑÏúÑÍ∏∞: ${atmosphere}\n` +
                        `ÏßÄÎ¶¨: ${geography}\n` +
                        `Í∏∞Ïà† ÏàòÏ§Ä: ${technology}\n` +
                        `ÎßàÎ≤ï ÏàòÏ§Ä: ${magic}\n` +
                        `Ï£ºÏöî Ï¢ÖÏ°±: ${races.join(', ')}\n` +
                        `ÏûêÏõê: ${resources.join(', ')}\n\n` +
                        `ÏÑ§Î™Ö:\n${description}`;
                    
                    navigator.clipboard.writeText(textToCopy)
                        .then(() => alert('ÏÑ∏Í≥Ñ Ï†ïÎ≥¥Í∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!'))
                        .catch(err => console.error('ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÌïòÎäî Îç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§:', err));
                });
                
                // Ï†ÄÏû• Î≤ÑÌäº - Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ï†ÄÏû•
                document.querySelector('.save-button').addEventListener('click', function() {
                    const worldData = {
                        name,
                        atmosphere,
                        geography,
                        technology, 
                        magic,
                        races,
                        resources,
                        description,
                        created: new Date().toISOString()
                    };
                    
                    // Í∏∞Ï°¥ Ï†ÄÏû•Îêú ÏÑ∏Í≥ÑÎì§ Î∂àÎü¨Ïò§Í∏∞
                    let savedWorlds = JSON.parse(localStorage.getItem('fantasyWorlds') || '[]');
                    
                    // ÏÉà ÏÑ∏Í≥Ñ Ï∂îÍ∞Ä
                    savedWorlds.push(worldData);
                    
                    // Ï†ÄÏû•
                    localStorage.setItem('fantasyWorlds', JSON.stringify(savedWorlds));
                    
                    alert('ÏÑ∏Í≥ÑÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!');
                });
            }
        });
    </script>
</body>
</html>
