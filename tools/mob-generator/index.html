<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëª¨ë¸Œ ìºë¦­í„° ìƒì„±ê¸° - íŒíƒ€ì§€ íˆ´í‚·</title>
    <!-- ê¸°ë³¸ ìŠ¤íƒ€ì¼ì‹œíŠ¸ ë¡œë“œ -->
    <link rel="stylesheet" href="../../assets/css/main.css">
</head>
<body>
    <div class="container" id="app-container">
        <div class="loading">
            <div class="loading-spinner"></div>
            ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...
        </div>
    </div>
    
    <!-- ==================== ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ (ì—¬ê¸°ì„œ ë©”ë‰´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤) ==================== -->
    <nav class="nav-container">
        <div class="nav-inner">
            <!-- ë¡œê³  ë° ì‚¬ì´íŠ¸ ì œëª© -->
            <a href="/" class="nav-logo">
                <i class="fas fa-dice-d20"></i>
                âœ¨ íŒíƒ€ì§€ íˆ´í‚· âœ¨
            </a>
            
            <!-- í–„ë²„ê±° ë©”ë‰´ í† ê¸€ ë²„íŠ¼ (ëª¨ë°”ì¼ ì „ìš©) -->
            <div class="menu-toggle" id="mobile-menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <!-- ë©”ë‰´ ë§í¬ ëª©ë¡ -->
            <ul class="nav-links" id="nav-menu">
                <li><a href="/MobJAKO-CHAGEN">í™ˆ</a></li>
                <li><a href="/MobJAKO-CHAGEN/tools/mob-generator/">ëª¨ë¸Œ ìƒì„±ê¸°</a></li>
                <li><a href="/MobJAKO-CHAGEN/tools/world-generator/">ì„¸ê³„ ìƒì„±ê¸°</a></li>
                <li><a href="/MobJAKO-CHAGEN/tools/dungeon-generator/">ë˜ì „ ìƒì„±ê¸°</a></li>
                <li><a href="/MobJAKO-CHAGEN/about.html">ì†Œê°œ</a></li>
            </ul>

            <footer class="footer">
            <p>Â© 2025 íŒíƒ€ì§€ íˆ´í‚·. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .</p>
            <p style="margin-top: 10px;">
                <a href="/MobJAKO-CHAGEN/privacy.html">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a> | 
                <a href="/MobJAKO-CHAGEN/terms.html">ì´ìš©ì•½ê´€</a> | 
                <a href="/MobJAKO-CHAGEN/contact.html">ë¬¸ì˜í•˜ê¸°</a>
            </p>
            <p style="margin-top: 15px;">
                Made by í™ì‚¼ì •ì—ë¸Œë¦¬íƒ€ì„ ğŸ’œ
            </p>
            </footer>
        </div>
    </nav>

    <!-- ê³µí†µ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../../assets/js/common.js"></script>
    
    <!-- ìºë¦­í„° ìƒì„± ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ìºë¦­í„° ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´
        let characterDB = {
            // ê¸°ë³¸ ë°ì´í„° (ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©)
            koreanMaleNames: ["ê¹€ë¯¼ìˆ˜", "ì´ì¤€í˜¸", "ë°•ì§€í›ˆ", "ì •ìš°ì§„", "ìµœí˜„ìš°"],
            koreanFemaleNames: ["ê¹€ì§€ì€", "ì´ì„œì—°", "ë°•ì†Œì˜", "ì •ë‹¤í˜œ", "ìµœì˜ˆì€"],
            englishMaleNames: ["John", "Michael", "David", "James", "Robert"],
            englishFemaleNames: ["Emma", "Olivia", "Sophia", "Ava", "Isabella"],
            ages: ["19", "22", "24", "27", "31", "35"],
            personalities: [
                "ë‚´ì„±ì ì´ê³  ì¡°ìš©í•œ ì„±ê²©, ì±…ì½ê¸°ë¥¼ ì¢‹ì•„í•¨",
                "í™œë°œí•˜ê³  ì‚¬êµì ì¸ ì„±ê²©, íŒŒí‹°ë¥¼ ì¢‹ì•„í•¨",
                "ì§„ì§€í•˜ê³  ì—´ì •ì ì¸ ì„±ê²©, ëª©í‘œ ì§€í–¥ì "
            ],
            traits: [
                "í•­ìƒ íŠ¹ì´í•œ ëª¨ìë¥¼ ì“°ê³  ë‹¤ë‹˜",
                "ì™¸êµ­ì–´ë¥¼ 5ê°œ ì´ìƒ êµ¬ì‚¬í•  ìˆ˜ ìˆìŒ",
                "ê¸¸ê³ ì–‘ì´ë“¤ì—ê²Œ ë¨¹ì´ë¥¼ ì£¼ëŠ” ìŠµê´€ì´ ìˆìŒ"
            ],
            appearance: {
                height: [
                    {"value": "ë§¤ìš° ì‘ì€ í‚¤", "tags": ["male", "female"]},
                    {"value": "ì‘ì€ í‚¤", "tags": ["male", "female"]},
                    {"value": "í‰ê·  í‚¤", "tags": ["male", "female"]},
                    {"value": "í° í‚¤", "tags": ["male", "female"]},
                    {"value": "ë§¤ìš° í° í‚¤", "tags": ["male", "female"]}
                ],
                hairLength: [
                    {"value": "ì‚­ë°œ", "tags": ["male"]},
                    {"value": "ì§§ì€", "tags": ["male", "female"]},
                    {"value": "ë‹¨ë°œ", "tags": ["female", "male_rare"]},
                    {"value": "ì–´ê¹¨ ê¸¸ì´", "tags": ["female", "male_rare"]},
                    {"value": "ê¸´", "tags": ["female"]},
                    {"value": "ë§¤ìš° ê¸´", "tags": ["female"]}
                ],
                hairColor: [
                    {"value": "ê²€ì€ìƒ‰", "tags": ["male", "female"]},
                    {"value": "ê°ˆìƒ‰", "tags": ["male", "female"]},
                    {"value": "ê¸ˆë°œ", "tags": ["male", "female"]},
                    {"value": "ë¹¨ê°„ìƒ‰", "tags": ["male", "female"]},
                    {"value": "ì€ìƒ‰", "tags": ["male", "female"]}
                ],
                hairStyle: [
                    {"value": "ìŠ¤íŠ¸ë ˆì´íŠ¸", "tags": ["male", "female"]},
                    {"value": "ì›¨ì´ë¸Œ", "tags": ["male", "female"]},
                    {"value": "ê³±ìŠ¬", "tags": ["male", "female"]},
                    {"value": "ë‹¨ì •í•œ", "tags": ["male", "female"]},
                    {"value": "í—í´ì–´ì§„", "tags": ["male", "female"]}
                ],
                eyeColor: [
                    {"value": "ê²€ì€ìƒ‰", "tags": ["male", "female"]},
                    {"value": "ê°ˆìƒ‰", "tags": ["male", "female"]},
                    {"value": "íŒŒë€ìƒ‰", "tags": ["male", "female"]},
                    {"value": "ë…¹ìƒ‰", "tags": ["male", "female"]},
                    {"value": "íšŒìƒ‰", "tags": ["male", "female"]}
                ],
                chestSize: [
                    {"value": "í‰í‰í•œ", "tags": ["male"]},
                    {"value": "ì‘ì€", "tags": ["female"]},
                    {"value": "ë³´í†µ", "tags": ["female"]},
                    {"value": "í°", "tags": ["female"]}
                ],
                build: [
                    {"value": "ë§¤ìš° í—ˆì•½í•œ", "tags": ["male", "female"]},
                    {"value": "í—ˆì•½í•œ", "tags": ["male", "female"]},
                    {"value": "ë³´í†µ", "tags": ["male", "female"]},
                    {"value": "íŠ¼íŠ¼í•œ", "tags": ["male", "female"]},
                    {"value": "ë§¤ìš° íŠ¼íŠ¼í•œ", "tags": ["male", "female"]},
                    {"value": "ê·¼ìœ¡ì§ˆì˜", "tags": ["male", "female"]}
                ]
            }
        };

        // í˜„ì¬ ìºë¦­í„° ë°ì´í„°
        let currentCharacter = null;
        
        // ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        function generateMarkdown(character) {
            if (!character) return '';
            
            return `## ${character.name}
* **ë‚˜ì´:** ${character.age}
* **ì„±ë³„:** ${character.gender}
* **ì™¸ëª¨:** ${character.appearance}
* **ì„±ê²©:** ${character.personality}
* **íŠ¹ì§•:** ${character.trait}`;
        }

        // ë°ì´í„° ë¡œë“œ ì‹œë„ í•¨ìˆ˜
        async function tryLoadData() {
            try {
                const basePath = getBasePath();
                console.log('ê²½ë¡œ:', basePath);
                
                // ì—°ê²° í…ŒìŠ¤íŠ¸
                const testResponse = await fetch(`${basePath}data/names/korean_male_names.json`);
                if (!testResponse.ok) {
                    throw new Error(`ë°ì´í„° ë¡œë“œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${testResponse.status}`);
                }
                
                // ì‹¤ì œ ë°ì´í„° ë¡œë“œ
                // ì´ë¦„ ë°ì´í„° ë¡œë“œ
                const koreanMaleResponse = await fetch(`${basePath}data/names/korean_male_names.json`);
                const koreanFemaleResponse = await fetch(`${basePath}data/names/korean_female_names.json`);
                const englishMaleResponse = await fetch(`${basePath}data/names/english_male_names.json`);
                const englishFemaleResponse = await fetch(`${basePath}data/names/english_female_names.json`);
                
                // ê¸°ë³¸ ì†ì„± ë°ì´í„° ë¡œë“œ
                const agesResponse = await fetch(`${basePath}data/ages.json`);
                const personalitiesResponse = await fetch(`${basePath}data/personalities.json`);
                const traitsResponse = await fetch(`${basePath}data/traits.json`);
                
                // ì™¸ëª¨ ì†ì„± ë°ì´í„° ë¡œë“œ
                const heightResponse = await fetch(`${basePath}data/appearances/height.json`);
                const hairLengthResponse = await fetch(`${basePath}data/appearances/hair_length.json`);
                const hairColorResponse = await fetch(`${basePath}data/appearances/hair_color.json`);
                const hairStyleResponse = await fetch(`${basePath}data/appearances/hair_style.json`);
                const eyeColorResponse = await fetch(`${basePath}data/appearances/eye_color.json`);
                const chestSizeResponse = await fetch(`${basePath}data/appearances/chest_size.json`);
                const buildResponse = await fetch(`${basePath}data/appearances/build.json`);
                
                // ì‘ë‹µì„ JSONìœ¼ë¡œ ë³€í™˜
                const koreanMaleData = await koreanMaleResponse.json();
                const koreanFemaleData = await koreanFemaleResponse.json();
                const englishMaleData = await englishMaleResponse.json();
                const englishFemaleData = await englishFemaleResponse.json();
                
                const agesData = await agesResponse.json();
                const personalitiesData = await personalitiesResponse.json();
                const traitsData = await traitsResponse.json();
                
                const heightData = await heightResponse.json();
                const hairLengthData = await hairLengthResponse.json();
                const hairColorData = await hairColorResponse.json();
                const hairStyleData = await hairStyleResponse.json();
                const eyeColorData = await eyeColorResponse.json();
                const chestSizeData = await chestSizeResponse.json();
                const buildData = await buildResponse.json();
                
                // ë°ì´í„° ì €ì¥
                characterDB.koreanMaleNames = koreanMaleData.names;
                characterDB.koreanFemaleNames = koreanFemaleData.names;
                characterDB.englishMaleNames = englishMaleData.names;
                characterDB.englishFemaleNames = englishFemaleData.names;
                
                characterDB.ages = agesData.ages;
                characterDB.personalities = personalitiesData.personalities;
                characterDB.traits = traitsData.traits;
                
                characterDB.appearance.height = heightData.height;
                characterDB.appearance.hairLength = hairLengthData.hair_length;
                characterDB.appearance.hairColor = hairColorData.hair_color;
                characterDB.appearance.hairStyle = hairStyleData.hair_style;
                characterDB.appearance.eyeColor = eyeColorData.eye_color;
                characterDB.appearance.chestSize = chestSizeData.chest_size;
                characterDB.appearance.build = buildData.build;
                
                console.log('ëª¨ë“  ë°ì´í„° ë¡œë“œ ì™„ë£Œ!');
                return true;
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                return false;
            }
        }

        // UI ì´ˆê¸°í™” í•¨ìˆ˜
        function initializeUI() {
            const container = document.getElementById('app-container');
            
            // UI HTML ìƒì„±
            container.innerHTML = `
                <h1>ëª¨ë¸Œ ìºë¦­í„° ìƒì„±ê¸°</h1>
                
                <div id="error-container"></div>
                
                <div class="filter-section">
                    <div class="filter-title">ìºë¦­í„° í•„í„° ì„¤ì •</div>
                    <div class="filter-options">
                        <div class="filter-group">
                            <label>ì„±ë³„:</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="gender" value="random" checked> ëœë¤
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="gender" value="male"> ë‚¨ì„±
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="gender" value="female"> ì—¬ì„±
                                </label>
                            </div>
                        </div>
                        
                        <div class="filter-group">
                            <label>ì´ë¦„ ì–¸ì–´:</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="name-language" value="random" checked> ëœë¤
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="name-language" value="korean"> í•œêµ­ì–´
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="name-language" value="english"> ì˜ì–´
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="character-attributes">
                    <div class="attribute">
                        <div class="attribute-label">ì´ë¦„:</div>
                        <div class="attribute-value" id="name-value">-</div>
                    </div>
                    
                    <div class="attribute">
                        <div class="attribute-label">ë‚˜ì´:</div>
                        <div class="attribute-value" id="age-value">-</div>
                    </div>
                    
                    <div class="attribute">
                        <div class="attribute-label">ì„±ë³„:</div>
                        <div class="attribute-value" id="gender-value">-</div>
                    </div>
                    
                    <div class="attribute">
                        <div class="attribute-label">ì™¸ëª¨:</div>
                        <div class="attribute-value" id="appearance-value">-</div>
                    </div>
                    
                    <div class="attribute">
                        <div class="attribute-label">ì„±ê²©:</div>
                        <div class="attribute-value" id="personality-value">-</div>
                    </div>
                    
                    <div class="attribute">
                        <div class="attribute-label">íŠ¹ì§•:</div>
                        <div class="attribute-value" id="trait-value">-</div>
                    </div>
                </div>
                
                <button id="generate-btn">âœ¨ ìºë¦­í„° ìƒì„±í•˜ê¸° âœ¨</button>
                
                <div class="markdown-result" id="markdown-result" style="display: none; margin-top: 25px; background: rgba(173, 111, 255, 0.05); padding: 20px; border-radius: 12px; position: relative;">
                    <h3 style="margin-top: 0; color: var(--primary-color);">ë§ˆí¬ë‹¤ìš´ ê²°ê³¼</h3>
                    <pre id="markdown-content" style="background: white; padding: 15px; border-radius: 8px; white-space: pre-wrap; font-family: monospace; border: 1px solid rgba(0,0,0,0.1);"></pre>
                    <button id="copy-btn" style="position: absolute; top: 20px; right: 20px; background: var(--accent-color); color: black; font-size: 14px; padding: 6px 12px; border-radius: 20px;">ë³µì‚¬</button>
                </div>
                
                <div id="saved-characters"></div>
            `;
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.getElementById('generate-btn').addEventListener('click', generateCharacter);
            
            // ë³µì‚¬ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('copy-btn').addEventListener('click', function() {
                const markdownContent = document.getElementById('markdown-content');
                
                // í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ëŠ” ë°©ë²• ì‚¬ìš©
                const range = document.createRange();
                range.selectNodeContents(markdownContent);
                
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
                
                try {
                    // ë³µì‚¬ ëª…ë ¹ ì‹œë„
                    const successful = document.execCommand('copy');
                    
                    if (successful) {
                        // ë³µì‚¬ ì„±ê³µ
                        const copyBtn = document.getElementById('copy-btn');
                        const originalText = copyBtn.textContent;
                        copyBtn.textContent = 'ë³µì‚¬ ì™„ë£Œ! âœ¨';
                        copyBtn.style.backgroundColor = '#4CAF50';
                        
                        setTimeout(() => {
                            copyBtn.textContent = originalText;
                            copyBtn.style.backgroundColor = '';
                        }, 2000);
                    } else {
                        // ë³µì‚¬ ì‹¤íŒ¨
                        alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ì„ íƒí•˜ì—¬ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
                    }
                } catch (err) {
                    console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                    alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ì„ íƒí•˜ì—¬ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
                }
                
                // ì„ íƒ í•´ì œ
                selection.removeAllRanges();
            });
            
            // ì²« ìºë¦­í„° ìƒì„±
            generateCharacter();
        }

        // ì´ë¦„ ì„ íƒ í•¨ìˆ˜
        function getFilteredName(gender, nameLanguage) {
            // ì„±ë³„ê³¼ ì–¸ì–´ì— ë”°ë¼ ì ì ˆí•œ ì´ë¦„ ë°°ì—´ ì„ íƒ
            let nameArray;
            
            if (nameLanguage === 'korean') {
                nameArray = (gender === 'male') ? characterDB.koreanMaleNames : characterDB.koreanFemaleNames;
            } else {
                nameArray = (gender === 'male') ? characterDB.englishMaleNames : characterDB.englishFemaleNames;
            }
            
            // ëœë¤ ì´ë¦„ ì„ íƒ
            return getRandomItem(nameArray);
        }

        // ì™¸ëª¨ ì†ì„± í•„í„°ë§ í•¨ìˆ˜
        function getFilteredAppearanceItem(items, gender) {
            // ì„±ë³„ì— ë§ëŠ” í•­ëª©ë§Œ í•„í„°ë§
            let filteredItems = items.filter(item => 
                item.tags.includes(gender) || 
                (gender === 'male' && item.tags.includes('male_rare'))
            );
            
            // í•„í„°ë§ëœ í•­ëª©ì´ ì—†ìœ¼ë©´ ëª¨ë“  í•­ëª©ì—ì„œ ì„ íƒ
            if (filteredItems.length === 0) {
                filteredItems = items;
            }
            
            // ëœë¤ ì„ íƒ
            return filteredItems[Math.floor(Math.random() * filteredItems.length)].value;
        }

        // ìºë¦­í„° ìƒì„± í•¨ìˆ˜
        function generateCharacter() {
            try {
                // ì„ íƒëœ ì„±ë³„ ê°€ì ¸ì˜¤ê¸°
                const selectedGender = document.querySelector('input[name="gender"]:checked').value;
                
                // ì„ íƒëœ ì´ë¦„ ì–¸ì–´ ê°€ì ¸ì˜¤ê¸°
                const selectedNameLang = document.querySelector('input[name="name-language"]:checked').value;
                
                // ì„±ë³„ ê²°ì • (ëœë¤ ì˜µì…˜ ì²˜ë¦¬)
                const gender = (selectedGender === 'random') ? 
                    (Math.random() < 0.5 ? 'male' : 'female') : selectedGender;
                
                // ì´ë¦„ ì–¸ì–´ ê²°ì • (ëœë¤ ì˜µì…˜ ì²˜ë¦¬)
                const nameLanguage = (selectedNameLang === 'random') ?
                    (Math.random() < 0.5 ? 'korean' : 'english') : selectedNameLang;
                
                // ì´ë¦„ ì„ íƒ
                const name = getFilteredName(gender, nameLanguage);
                
                // ë‚˜ë¨¸ì§€ ì†ì„± ìƒì„±
                const age = getRandomItem(characterDB.ages);
                const personality = getRandomItem(characterDB.personalities);
                const trait = getRandomItem(characterDB.traits);
                
                // ì™¸ëª¨ ì†ì„± ìƒì„±
                const height = getFilteredAppearanceItem(characterDB.appearance.height, gender);
                const hairColor = getFilteredAppearanceItem(characterDB.appearance.hairColor, gender);
                const hairLength = getFilteredAppearanceItem(characterDB.appearance.hairLength, gender);
                const hairStyle = getFilteredAppearanceItem(characterDB.appearance.hairStyle, gender);
                const eyeColor = getFilteredAppearanceItem(characterDB.appearance.eyeColor, gender);
                const build = getFilteredAppearanceItem(characterDB.appearance.build, gender);
                
                // ì™¸ëª¨ ì„¤ëª… ì¡°í•© (ì„±ë³„ì— ë”°ë¼ ë‹¤ë¥´ê²Œ)
                let appearance;
                if (gender === 'male') {
                    appearance = `${height}ì— ${build} ì²´í˜•, ${hairLength} ${hairColor} ${hairStyle} ë¨¸ë¦¬, ${eyeColor} ëˆˆë™ì`;
                } else {
                    const chestSize = getFilteredAppearanceItem(characterDB.appearance.chestSize, gender);
                    appearance = `${height}ì— ${build} ì²´í˜•, ${hairLength} ${hairColor} ${hairStyle} ë¨¸ë¦¬, ${eyeColor} ëˆˆë™ì, ${chestSize} ê°€ìŠ´`;
                }
                
                // í˜„ì¬ ìºë¦­í„° ë°ì´í„° ì €ì¥
                currentCharacter = {
                    name: name,
                    age: age,
                    gender: gender === 'male' ? 'ë‚¨ì„±' : 'ì—¬ì„±',
                    nameLanguage: nameLanguage,
                    appearance: appearance,
                    personality: personality,
                    trait: trait
                };
                
                // UI ì—…ë°ì´íŠ¸
                updateCharacterDisplay();
            } catch (error) {
                console.error('ìºë¦­í„° ìƒì„± ì¤‘ ì˜¤ë¥˜:', error);
                
                // ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
                const errorContainer = document.getElementById('error-container');
                if (errorContainer) {
                    errorContainer.innerHTML = `
                        <div class="error-message">
                            ìºë¦­í„° ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}
                        </div>
                    `;
                }
            }
        }

        // ìºë¦­í„° í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateCharacterDisplay() {
            if (!currentCharacter) return;
            
            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ìœ„í•´ ëª¨ë“  ì• ë‹ˆë©”ì´ì…˜ ì´ˆê¸°í™”
            const attributes = document.querySelectorAll('.attribute');
            attributes.forEach(attr => {
                attr.style.opacity = '0';
                void attr.offsetWidth; // ë¦¬í”Œë¡œìš° ê°•ì œë¡œ íŠ¸ë¦¬ê±°
                attr.style.opacity = ''; // ìŠ¤íƒ€ì¼ ì œê±°í•˜ì—¬ CSSì—ì„œ ì •ì˜í•œ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
            });
            
            document.getElementById('name-value').textContent = currentCharacter.name;
            document.getElementById('age-value').textContent = currentCharacter.age;
            document.getElementById('gender-value').textContent = currentCharacter.gender;
            document.getElementById('appearance-value').textContent = currentCharacter.appearance;
            document.getElementById('personality-value').textContent = currentCharacter.personality;
            document.getElementById('trait-value').textContent = currentCharacter.trait;
            
            // ë§ˆí¬ë‹¤ìš´ ê²°ê³¼ í‘œì‹œ
            const markdownResult = document.getElementById('markdown-result');
            const markdownContent = document.getElementById('markdown-content');
            
            markdownResult.style.display = 'block';
            markdownContent.textContent = generateMarkdown(currentCharacter);
        }

        // ëœë¤ í•­ëª© ì„ íƒ í•¨ìˆ˜
        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', async function() {
            // ë°ì´í„° ë¡œë“œ ì‹œë„
            const loadSuccess = await tryLoadData();
            
            // ë°ì´í„° ë¡œë“œ ì„±ê³µ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ UI ì´ˆê¸°í™” ì§„í–‰
            // (ì‹¤íŒ¨í•´ë„ ê¸°ë³¸ ë°ì´í„°ê°€ ìˆìœ¼ë¯€ë¡œ ì‘ë™ ê°€ëŠ¥)
            initializeUI();
            
            if (!loadSuccess) {
                console.warn('ì™¸ë¶€ ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
                
                // ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶”ê°€
                const errorContainer = document.getElementById('error-container');
                if (errorContainer) {
                    errorContainer.innerHTML = `
                        <div class="error-message">
                            ì™¸ë¶€ ë°ì´í„° íŒŒì¼ì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ ë°ì´í„°ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
                        </div>
                    `;
                }
            }
        });
    </script>
</body>
</html>
