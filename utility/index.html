<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ë²ˆì—­ - íŒíƒ€ì§€ íˆ´í‚·</title>
    <!-- ê¸°ë³¸ ìŠ¤íƒ€ì¼ì‹œíŠ¸ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <!-- ìƒì„±ê¸° ê³µí†µ ìŠ¤íƒ€ì¼ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/generator-common.css">
    <!-- ìœ í‹¸ë¦¬í‹° ê³µí†µ ìŠ¤íƒ€ì¼ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/utility-common.css">
    <!-- AI ë²ˆì—­ ì „ìš© ìŠ¤íƒ€ì¼ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/ai-translator.css">
    <!-- AI ë²ˆì—­ ê°œì„  ìŠ¤íƒ€ì¼ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/ai-translator-improved.css">
    <!-- API ìƒíƒœ í‘œì‹œ ìŠ¤íƒ€ì¼ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/api-status.css">
    <!-- API í‚¤ ì…ë ¥ ê´€ë ¨ ìŠ¤íƒ€ì¼ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/api-key.css">
    <!-- ê³ ê¸‰ ì„¤ì • ê´€ë ¨ ìŠ¤íƒ€ì¼ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/advanced-options.css">
    <!-- ì‚¬ìš©ì ì‚¬ì „ ë° ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ìŠ¤íƒ€ì¼ ë¡œë“œ -->
    <link rel="stylesheet" href="../assets/css/user-dictionary.css">
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ -->
    <div id="header-placeholder"></div>
    
    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div class="container">
        <h1>AI ë²ˆì—­</h1>
        
        <div class="utility-intro">
            <h2 class="utility-title">ë§¥ë½ì„ ì´í•´í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ë²ˆì—­</h2>
            <p class="utility-description">
                íŒíƒ€ì§€ íˆ´í‚·ì˜ AI ë²ˆì—­ ë„êµ¬ëŠ” ë‹¨ìˆœí•œ ë‹¨ì–´ ë²ˆì—­ì„ ë„˜ì–´ ë¬¸ë§¥ê³¼ ë‰˜ì•™ìŠ¤ë¥¼ ì´í•´í•˜ì—¬ ìì—°ìŠ¤ëŸ¬ìš´ ë²ˆì—­ì„ ì œê³µí•©ë‹ˆë‹¤. 
                íŠ¹íˆ íŒíƒ€ì§€, SF, ê²Œì„ ê´€ë ¨ ìš©ì–´ì™€ ì„¸ê³„ê´€ ì„¤ì •ì— ìµœì í™”ë˜ì–´ ìˆì–´ ì°½ì‘ í™œë™ì— ì™„ë²½í•œ ë™ë°˜ìê°€ ë©ë‹ˆë‹¤.
                Googleì˜ ìµœì‹  Gemini 2.0 Flash ëª¨ë¸ì„ í™œìš©í•˜ì—¬ ë”ìš± ì •í™•í•˜ê³  ìì—°ìŠ¤ëŸ¬ìš´ ë²ˆì—­ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
            </p>
            <div class="info-message">
                <i class="fas fa-info-circle"></i> ì´ ë²ˆì—­ ì„œë¹„ìŠ¤ëŠ” ì‚¬ìš©ìì˜ ê°œì¸ API í‚¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë²ˆì—­ ë°ì´í„°ëŠ” ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ Google Gemini APIë¡œ ì „ì†¡ë˜ë©°, ì €í¬ ì„œë²„ì—ëŠ” ì–´ë– í•œ ë°ì´í„°ë„ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
            </div>
        </div>
        
        <div class="translator-card">
            <div class="translator-header">
                <div class="translator-icon">ğŸŒ</div>
                <h3 class="translator-title">AI ë²ˆì—­ ë„êµ¬</h3>
                <div class="gemini-badge">
                    <i class="fas fa-robot"></i> Gemini 2.0 ëª¨ë¸ ì‚¬ìš©
                </div>
            </div>
            
            <div class="translator-content">
                <p>
                    ë²ˆì—­í•  ë‚´ìš©ì„ ì…ë ¥í•˜ê³  ì–¸ì–´ ë°©í–¥ì„ ì„ íƒí•œ í›„ 'ë²ˆì—­í•˜ê¸°' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
                    Gemini AIê°€ ìì—°ìŠ¤ëŸ¬ìš´ ë²ˆì—­ ê²°ê³¼ë¥¼ ì œê³µí•´ ë“œë¦½ë‹ˆë‹¤.
                </p>
                <div class="api-status" id="api-status">
                    <div class="status-indicator loading">
                        <div class="status-dot"></div>
                        <span>Gemini API ì—°ê²° ì¤‘...</span>
                    </div>
                </div>
            </div>
            
            <form id="translation-form">
                <div class="api-key-section">
                    <div class="form-group">
                        <label class="form-label" for="api-key">Gemini API í‚¤</label>
                        <div class="api-key-input-container">
                            <input type="password" class="form-input" id="api-key" placeholder="ì—¬ê¸°ì— API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                            <button type="button" class="toggle-api-visibility" id="toggle-api-visibility">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="api-key-help">
                            <a href="https://aistudio.google.com/apikey" target="_blank" class="api-key-link">
                                <i class="fas fa-external-link-alt"></i> Google AI ìŠ¤íŠœë””ì˜¤ì—ì„œ API í‚¤ ì–»ê¸°
                            </a>
                            <div class="api-key-save">
                                <input type="checkbox" id="save-api-key">
                                <label for="save-api-key">ì´ ë¸Œë¼ìš°ì €ì— API í‚¤ ì €ì¥ (ì•ˆì „í•œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©)</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="source-text">ë²ˆì—­í•  í…ìŠ¤íŠ¸</label>
                    <textarea class="form-textarea" id="source-text" placeholder="ì—¬ê¸°ì— ë²ˆì—­í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="translation-direction">ë²ˆì—­ ë°©í–¥</label>
                    <select class="form-select" id="translation-direction">
                        <option value="ko-en">í•œêµ­ì–´ â†’ ì˜ì–´</option>
                        <option value="en-ko">ì˜ì–´ â†’ í•œêµ­ì–´</option>
                        <option value="ko-jp">í•œêµ­ì–´ â†’ ì¼ë³¸ì–´</option>
                        <option value="jp-ko">ì¼ë³¸ì–´ â†’ í•œêµ­ì–´</option>
                    </select>
                </div>
                
                <!-- ë²ˆì—­ ì˜µì…˜ í† ê¸€ ë²„íŠ¼ -->
                <div class="advanced-options-toggle">
                    <button type="button" id="toggle-translation-options">
                        <i class="fas fa-cog"></i> ë²ˆì—­ ì˜µì…˜ ë³´ê¸°
                    </button>
                </div>
                
                <!-- ë²ˆì—­ ì˜µì…˜ ì»¨í…Œì´ë„ˆ - ë™ì ìœ¼ë¡œ ë¡œë“œë  ì˜ì—­ -->
                <div id="translation-options-container" style="display: none;"></div>
                
                <!-- ê³ ê¸‰ ì„¤ì • ì˜ì—­ - ë™ì ìœ¼ë¡œ ë¡œë“œë  ì»¨í…Œì´ë„ˆ -->
                <div id="advanced-options-container"></div>
                
                <div class="form-buttons">
                    <button type="submit" class="form-button" id="translate-btn">ë²ˆì—­í•˜ê¸°</button>
                    <button type="reset" class="form-button secondary">ì´ˆê¸°í™”</button>
                </div>
            </form>
            
            <div class="loading" id="translation-loading">
                <div class="loading-spinner"></div>
                <p>ë²ˆì—­ ì¤‘ì…ë‹ˆë‹¤...</p>
            </div>
            
            <div class="translation-result" id="translation-result" style="display: none;">
                ë²ˆì—­ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
            </div>
            
            <div class="form-buttons" style="justify-content: flex-end; margin-top: 10px;">
                <button class="form-button secondary" id="copy-translation-btn" style="display: none;">
                    <i class="fas fa-copy"></i> ê²°ê³¼ ë³µì‚¬í•˜ê¸°
                </button>
            </div>
        </div>
        
        <div class="feature-list">
            <div class="feature-item">
                <div class="feature-icon">âœ¨</div>
                <div class="feature-text">
                    <strong>ë§¥ë½ ê¸°ë°˜ ë²ˆì—­</strong> - ë‹¨ìˆœ ë‹¨ì–´ ëŒ€ ë‹¨ì–´ ë²ˆì—­ì´ ì•„ë‹Œ ë¬¸ë§¥ì„ ê³ ë ¤í•œ ìì—°ìŠ¤ëŸ¬ìš´ ë²ˆì—­
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ”®</div>
                <div class="feature-text">
                    <strong>íŒíƒ€ì§€ ìš©ì–´ ìµœì í™”</strong> - íŒíƒ€ì§€, SF, ê²Œì„ ë“± íŠ¹ìˆ˜ ì˜ì—­ì˜ ìš©ì–´ì— ìµœì í™”
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸš€</div>
                <div class="feature-text">
                    <strong>Gemini 2.0 ì—”ì§„</strong> - Googleì˜ ìµœì‹  AI ëª¨ë¸ë¡œ ë›°ì–´ë‚œ ì´í•´ë ¥ê³¼ ë²ˆì—­ í’ˆì§ˆ ì œê³µ
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ“</div>
                <div class="feature-text">
                    <strong>ì‚¬ìš©ì ì •ì˜ ì‚¬ì „</strong> - íŠ¹ì • ë‹¨ì–´ë‚˜ ë¬¸êµ¬ì— ëŒ€í•œ ë§ì¶¤í˜• ë²ˆì—­ ì ìš© ê°€ëŠ¥
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ¯</div>
                <div class="feature-text">
                    <strong>ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸</strong> - ë²ˆì—­ ìŠ¤íƒ€ì¼ì´ë‚˜ íŠ¹ì„±ì„ ì„¸ë°€í•˜ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ”’</div>
                <div class="feature-text">
                    <strong>ê°œì¸ì •ë³´ ë³´í˜¸</strong> - ìì‹ ì˜ API í‚¤ ì‚¬ìš©ìœ¼ë¡œ ë°ì´í„°ê°€ ì§ì ‘ Googleë¡œ ì „ì†¡, ì„œë²„ì— ì €ì¥ë˜ì§€ ì•ŠìŒ
                </div>
            </div>
        </div>

        <!-- í‘¸í„° -->
        <div id="footer-placeholder"></div>
    </div>

    <!-- Gemini API ë¡œë“œ -->
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
    
    <!-- Gemini API ëª¨ë“ˆ ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="module">
      import { GoogleGenerativeAI } from "@google/generative-ai";
      // GoogleGenerativeAIë¥¼ ì „ì—­ ë³€ìˆ˜ë¡œ ë“±ë¡
      window.GoogleGenerativeAI = GoogleGenerativeAI;
      
      // ëª¨ë“ˆì´ ë¡œë“œë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” ì´ë²¤íŠ¸ ë°œìƒ
      window.dispatchEvent(new Event('geminiApiLoaded'));
    </script>
    
    <!-- ê³µí†µ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../assets/js/common.js"></script>
    <!-- AI ë²ˆì—­ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../utility/js/ai-translator.js"></script>
    <!-- ê³ ê¸‰ ì„¤ì • ë¡œë” ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../utility/js/advanced-options-loader.js"></script>
    <!-- ë²ˆì—­ ì˜µì…˜ ë¡œë” ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../utility/js/translator-options-loader.js"></script>
    <!-- ì‚¬ìš©ì ì‚¬ì „ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../utility/js/user-dictionary.js"></script>
    <!-- ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../utility/js/custom-prompts.js"></script>
    <!-- AI ë²ˆì—­ ì¶œë ¥ì‹œ ChatML íƒœê·¸ ì œê±° -->
    <script src="utility/js/tag-cleaner.js"></script>
    <!-- Header ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../assets/js/loadHeader.js"></script>
    <!-- Footer ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../assets/js/loadFooter.js"></script>
    
    <!-- API ìƒíƒœ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="../utility/js/api-status.js"></script>
    
    <!-- ê²°ê³¼ ë³µì‚¬ ë²„íŠ¼ ë™ì‘ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ë²ˆì—­ ê²°ê³¼ê°€ í‘œì‹œë  ë•Œ ë³µì‚¬ ë²„íŠ¼ë„ í‘œì‹œ
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.target.id === 'translation-result' && 
                    mutation.target.style.display !== 'none') {
                    document.getElementById('copy-translation-btn').style.display = 'block';
                } else if (mutation.target.id === 'translation-result' && 
                           mutation.target.style.display === 'none') {
                    document.getElementById('copy-translation-btn').style.display = 'none';
                }
            });
        });
        
        observer.observe(document.getElementById('translation-result'), {
            attributes: true,
            attributeFilter: ['style']
        });
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë²ˆì—­ ì˜µì…˜ ì´ˆê¸° ìƒíƒœ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            const optionsContainer = document.getElementById('translation-options-container');
            const toggleButton = document.getElementById('toggle-translation-options');
            
            if (optionsContainer && toggleButton) {
                // ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê²¨ì§„ ìƒíƒœë¡œ ì‹œì‘
                optionsContainer.style.display = 'none';
                toggleButton.innerHTML = '<i class="fas fa-cog"></i> ë²ˆì—­ ì˜µì…˜ ë³´ê¸°';
                
                // í† ê¸€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
                toggleButton.addEventListener('click', function() {
                    if (optionsContainer.style.display === 'none') {
                        optionsContainer.style.display = 'block';
                        toggleButton.innerHTML = '<i class="fas fa-cog"></i> ë²ˆì—­ ì˜µì…˜ ìˆ¨ê¸°ê¸°';
                    } else {
                        optionsContainer.style.display = 'none';
                        toggleButton.innerHTML = '<i class="fas fa-cog"></i> ë²ˆì—­ ì˜µì…˜ ë³´ê¸°';
                    }
                });
            }
        });
    </script>
</body>
</html>
